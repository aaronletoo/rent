<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="lib/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="css/main.css"/>
    <script src="lib/json2.js" type="text/javascript"></script>
    <script src="lib/ligerUI/js/plugins/ligerDialog.js" type="text/javascript"></script>
    <script src="lib/ligerUI/js/plugins/ligerTextBox.js" type="text/javascript"></script>
    <script src="lib/ligerUI/js/plugins/ligerCheckBox.js" type="text/javascript"></script>
    <script src="lib/ligerUI/js/plugins/ligerComboBox.js" type="text/javascript"></script>
    <script src="lib/ligerUI/js/plugins/ligerGrid.js" type="text/javascript"></script>
    <script src="lib/ligerUI/js/plugins/ligerDateEditor.js" type="text/javascript"></script>
    <script src="lib/ligerUI/js/plugins/ligerSpinner.js" type="text/javascript"></script>
    <script src="lib/ligerUI/js/plugins/ligerButton.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/highcharts.js"></script>
    <script type="text/javascript" src="js/chartTool.js"></script>
    <style type="text/css">
        .l-div {
            height: 30px;
            margin-top: 10px
        }

        .l-span-edit-com {
            margin-left: 10px;
            width: 70px;
            float: left;
            margin-top: 2px
        }

        .l-edit-com {
            width: 60px;
            margin-left: 10px;
            float: left;
        }

        #monitorContainer .lableTD {
            text-align: right;
            font-size: 15px;
            padding: 5px;
        }

        #monitorContainer .valueTD {
            text-align: right;
            font-size: 15px;
            padding: 5px;
            background-color: dodgerblue;
        }

        #monitorContainer{
            margin-top: 5px;
        }
    </style>
    <script type="text/javascript">
        var  ws=null;
        var num= currentMonitor.number;
        var tempURL = $.URL.sensors.getSensorDataArray;
        var myURL = tempURL + num.toString();
        $(document).ready(function () {
            $("#number").html(currentMonitor.number);
            $("#group").html(currentMonitor.groupName);
            if(currentMonitor.status=="暂无数据")  {
                alert("暂无数据");
            }
            else{
                connect();
            }
        });
        function connect() {
            var url="ws://www.cseicms.com/realtimeMonitor/websocket/hello";
            ws = (url.indexOf('sockjs') != -1) ? new SockJS(url, undefined, {protocols_whitelist: transports}) : new WebSocket(url);
            ws.onopen = function () {
                console.log('Info: connection opened.');
                ws.send(currentMonitor.number);
            ws.onmessage = function (event) {
                console.log ("收到消息！"+event.data);
                var sensorJumpName=eval("(" +event.data+ ")");
                var number=sensorJumpName.sensors[0].sensorNum;
                var data1=sensorJumpName.sensors[0].data;
            if(currentMonitor.number==number){
                  drawChart("#waveContainer", data1, "mV");
                }
            };
            ws.onclose = function (event) {
                console.log('Info: connection closed.');
                console.log(event);			};
            }
        }
    </script>
</head>
<body>
<div id="realDataContainer">
    <div id="monitorContainer">
        <table>
            <tr>
                <td><div class="lableTD">传感器编号:</div></td>
                <td id="number" class="valueTD"></td>
                <td><div class="lableTD">监测组:</div></td>
                <td id="group" class="valueTD"></td>
            </tr>
        </table>
    </div>
    <div id="waveContainer" style="min-width:700px;height:400px"></div>
</div>
<br/>
</body>
</html>